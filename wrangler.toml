name = "simple-share"
compatibility_date = "2024-01-01"
main = "server/index.ts"
compatibility_flags = ["nodejs_compat"]

# Worker 模式：使用 assets 目录提供静态文件
# 注意：需要先构建前端，dist 目录必须存在
# 新版本使用 assets 配置替代 [site]
[assets]
directory = "dist"
binding = "ASSETS"

# 绑定配置：通过 Dashboard 或环境变量配置（见 scripts/prepare-wrangler.js）
# [[d1_databases]]
# binding = "DB"
# database_name = "simpleshare-db"
# database_id = ""

# [[r2_buckets]]
# binding = "FILES"
# bucket_name = "simpleshare-files"

# 环境变量配置
# ⚠️ 重要：生产环境的环境变量必须在 Cloudflare Dashboard 中配置，不要在这里填写真实值
# Dashboard 配置路径：Workers & Pages → 你的 Worker → Settings → Variables → Environment Variables
# 
# 本地开发可以使用以下占位符，但生产环境必须使用 Dashboard 配置
[vars]
# JWT_SECRET 已移至代码内置安全回退逻辑，如需自定义请在 Dashboard 设置

# 生产环境配置
[env.production]
name = "simple-share"

# [[env.production.d1_databases]]
# binding = "DB"
# database_name = "simpleshare-db"
# database_id = ""

# [[env.production.r2_buckets]]
# binding = "FILES"
# bucket_name = "simpleshare-files"

# ⚠️ 生产环境变量必须在 Dashboard 中配置，不要在这里填写真实值
# 这里只是声明变量类型，实际值从 Dashboard 读取
[env.production.vars]
# JWT_SECRET 已移至代码内置安全回退逻辑

